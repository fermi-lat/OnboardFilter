package OnboardFilter
version v4r16p4bt01
# $Header: /nfs/slac/g/glast/ground/cvs/OnboardFilter/cmt/requirements,v 1.126.2.4 2012/05/20 04:36:56 heather Exp $

author Tracy Usher <usher@SLAC.Stanford.edu>

use EbfWriter           *
use obf v* IExternal
use CalibSvc * 

apply_pattern packageShr
apply_pattern package_include
apply_pattern package_header

private
use OnboardFilterTds v*
use MootSvc v*
use CRflux v*
use TkrDigi v*
use AcdDigi v*
use CalDigi v*
use gr_app v*

macro OnboardFilter_cppflags "" \
#   Linux "-DGLEAM -D__i386 -DEFC_FILTER -DMSG_ST -D__unix__  -DWUT_IMPLEMENTATION_PX "\
   Linux "-DGLEAM -D__i386 -DEFC_FILTER "\
   WIN32 " /D GLEAM /D__i386 /DEFC_FILTER  /D_WIN32"

#    -nostdinc -I/usr/local/gcc-3.2.3/lib/gcc-lib/i686-pc-linux-gnu/3.2.3/include -I/usr/include"\

macro OnboardFilter_cflags $(OnboardFilter_cppflags)

macro_append cpplinkflags "" Linux " -ldl -lpthread " WIN32 ""

macro headers "" WIN32 "*.h"

# Code that is not tied to any specific OBF
macro generic-src " CalOutputTool.cxx DGNFilterTool.cxx FilterTrackTool.cxx \      
         FSWAuxLibsTool.cxx GammaFilterCfgPrms.h GammaFilterCfgPrms.cxx GammaFilterTool.cxx GemOutputTool.cxx \
         GrbTrack.h GrbTrack.cxx HIPFilterTool.cxx IFilterCgfPrms.h IFilterLibs.h IFilterTool.h \
         MIPFilterTool.cxx ObfInterface.h ObfInterface.cxx OnboardFilter.cxx OutputRtn.h TkrOutputTool.cxx \
         trackProj.* "

# Use B3-0-0 for RHEl4 and B1-1-3 for VC71
macro B1-1-3-src "DGNFilterLibsB3-0-0.h DGNFilterLibsB3-0-0.cxx GammaFilterLibsB3-0-0.h GammaFilterLibsB3-0-0.cxx \
      MIPFilterLibsB3-0-0.h MIPFilterLibsB3-0-0.cxx \
      HIPFilterLibsB3-0-0.h HIPFilterLibsB3-0-0.cxx" \
  WIN32 " DGNFilterLibsB1-1-3.h DGNFilterLibsB1-1-3.cxx GammaFilterLibsB1-1-3.h GammaFilterLibsB1-1-3.cxx \
      MIPFilterLibsB1-1-3.h MIPFilterLibsB1-1-3.cxx \
      HIPFilterLibsB1-1-3.h HIPFilterLibsB1-1-3.cxx "

library OnboardFilter \
 -s=../OnboardFilter $(headers)\
 -s=../src $(generic-src) $(B1-1-3-src) \
 -s=Dll *.cxx 
 


# use this only for the test. TODO: make it cleaner
apply_pattern package_Cshlibflags

public

#set LD_LIBRARY_PATH ${ONBOARDFILTERROOT}/rh9_gcc32

#apply_pattern package_test
set JOBOPTIONS ${ONBOARDFILTERROOT}/src/test/jobOptions.txt

private
application test_OnboardFilter ${GuiMain} test/*.cxx ${Win32Resource}


